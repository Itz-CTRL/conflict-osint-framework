{"ast":null,"code":"// src/App.jsx\nimport{useState,useEffect}from'react';import{BrowserRouter,Routes,Route,Navigate}from'react-router-dom';import'./index.css';import{THEMES}from'./themes';import{api}from'./utils/api';import Header from'./components/Header';import Ticker from'./components/Ticker';import Dashboard from'./components/Dashboard';import CasePage from'./components/CasePage';import ThemeButton from'./components/ThemeButton';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[theme,setTheme]=useState(()=>localStorage.getItem('soko-theme')||'dark');const[online,setOnline]=useState(false);// Persist theme\nuseEffect(()=>{localStorage.setItem('soko-theme',theme);},[theme]);// Check backend health on mount and every 30s\nuseEffect(()=>{const check=async()=>{try{await api.health();setOnline(true);}catch(_unused){setOnline(false);}};check();const id=setInterval(check,30000);return()=>clearInterval(id);},[]);const t=THEMES[theme];return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',background:t.bgGrad,color:t.text,fontFamily:\"'Sora', sans-serif\",transition:'background 0.4s, color 0.3s'},children:[/*#__PURE__*/_jsx(Header,{theme:theme,online:online}),/*#__PURE__*/_jsx(Ticker,{theme:theme}),!online&&/*#__PURE__*/_jsxs(\"div\",{style:{background:\"\".concat(t.riskHigh,\"22\"),border:\"1px solid \".concat(t.riskHigh,\"44\"),borderRadius:0,padding:'8px 24px',fontFamily:\"'Sora',sans-serif\",fontSize:13,color:t.riskHigh,textAlign:'center'},children:[\"\\u26A0 Backend offline \\u2014 start the Flask server: \",/*#__PURE__*/_jsx(\"code\",{style:{fontFamily:\"'JetBrains Mono',monospace\"},children:\"python app.py\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Dashboard,{theme:theme})}),/*#__PURE__*/_jsx(Route,{path:\"/case/:id\",element:/*#__PURE__*/_jsx(CasePage,{theme:theme})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]}),/*#__PURE__*/_jsx(ThemeButton,{currentTheme:theme,onTheme:setTheme})]})});}","map":{"version":3,"names":["useState","useEffect","BrowserRouter","Routes","Route","Navigate","THEMES","api","Header","Ticker","Dashboard","CasePage","ThemeButton","jsx","_jsx","jsxs","_jsxs","App","theme","setTheme","localStorage","getItem","online","setOnline","setItem","check","health","_unused","id","setInterval","clearInterval","t","children","style","minHeight","background","bgGrad","color","text","fontFamily","transition","concat","riskHigh","border","borderRadius","padding","fontSize","textAlign","path","element","to","replace","currentTheme","onTheme"],"sources":["/home/ctrl/cmpt130/soko-osint/src/App.jsx"],"sourcesContent":["// src/App.jsx\nimport { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport './index.css';\n\nimport { THEMES } from './themes';\nimport { api } from './utils/api';\n\nimport Header from './components/Header';\nimport Ticker from './components/Ticker';\nimport Dashboard from './components/Dashboard';\nimport CasePage from './components/CasePage';\nimport ThemeButton from './components/ThemeButton';\n\nexport default function App() {\n  const [theme, setTheme] = useState(() => localStorage.getItem('soko-theme') || 'dark');\n  const [online, setOnline] = useState(false);\n\n  // Persist theme\n  useEffect(() => {\n    localStorage.setItem('soko-theme', theme);\n  }, [theme]);\n\n  // Check backend health on mount and every 30s\n  useEffect(() => {\n    const check = async () => {\n      try {\n        await api.health();\n        setOnline(true);\n      } catch {\n        setOnline(false);\n      }\n    };\n    check();\n    const id = setInterval(check, 30000);\n    return () => clearInterval(id);\n  }, []);\n\n  const t = THEMES[theme];\n\n  return (\n    <BrowserRouter>\n      <div style={{\n        minHeight: '100vh',\n        background: t.bgGrad,\n        color: t.text,\n        fontFamily: \"'Sora', sans-serif\",\n        transition: 'background 0.4s, color 0.3s',\n      }}>\n        <Header theme={theme} online={online} />\n        <Ticker theme={theme} />\n\n        {/* Offline banner */}\n        {!online && (\n          <div style={{\n            background: `${t.riskHigh}22`,\n            border: `1px solid ${t.riskHigh}44`,\n            borderRadius: 0,\n            padding: '8px 24px',\n            fontFamily: \"'Sora',sans-serif\", fontSize: 13, color: t.riskHigh,\n            textAlign: 'center',\n          }}>\n            ⚠ Backend offline — start the Flask server: <code style={{ fontFamily: \"'JetBrains Mono',monospace\" }}>python app.py</code>\n          </div>\n        )}\n\n        <Routes>\n          <Route path=\"/\"          element={<Dashboard theme={theme} />} />\n          <Route path=\"/case/:id\"  element={<CasePage  theme={theme} />} />\n          <Route path=\"*\"          element={<Navigate to=\"/\" replace />} />\n        </Routes>\n\n        {/* Floating draggable theme switcher */}\n        <ThemeButton currentTheme={theme} onTheme={setTheme} />\n      </div>\n    </BrowserRouter>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}